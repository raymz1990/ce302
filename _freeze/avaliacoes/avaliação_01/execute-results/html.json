{
  "hash": "a272bcf8744ab70bdcaa4283a3c7a1db",
  "result": {
    "markdown": "---\nalways_allow_html: true\ntitle: \"Prova 01 \"\n---\n\n\n\n## 1. Para esse exercício você deverá utilizar as duas matrizes fornecidas.\n* Considere a matriz A dada por:\n\n|A |B |C |D |E |\n|--|--|--|--|--|\n|28|32|8 |9 |49|\n|7 |21|35|28|10|\n|47|43|15|34|2 |\n|48|42|19|32|26|\n|45|44|39|50|26|\n\n* e a matriz B dada por:\n\n|A |B |C |D |E |\n|--|--|--|--|--|\n|0 |26|3 |8 |30|\n|35|12|19|27|27|\n|27|24|12|17|29|\n|31|36|40|35|8 |\n|24|43|31|21|39|\n\nConsidere:\n$$C = (A * B^T)^{-1}$$\ne\n$$P = B * (B^T * B)*B^T$$\na) Considere a matriz de projeção $P$. A soma de seus autovetores é dada por?\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Defina as matrizes A e B\nA <- matrix(c(28, 32, 8, 9, 49,\n              7, 21, 35, 28, 10,\n              47, 43, 15, 34, 2,\n              48, 42, 19, 32, 26,\n              45, 44, 39, 50, 26),\n            nrow = 5,\n            byrow = TRUE)\n\nB <- matrix(c(0, 26, 3, 8, 30,\n              35, 12, 19, 27, 27,\n              27, 24, 12, 17, 29,\n              31, 36, 40, 35, 8,\n              24, 43, 31, 21, 39),\n            nrow = 5,\n            byrow = TRUE)\n\n# Calcule os autovetores para cada matriz\neigen_A <- eigen(A)$vectors\neigen_B <- eigen(B)$vectors\n\n# Some os autovetores\nsoma_autovetores <- eigen_A + eigen_B\n\n# Calculando P\nP <- B %*% (t(B) %*% B) %*% t(B)\n\n# Calculando os autovetores de P\neigen_P <- eigen(P)$vectors\n\n# Calculando a soma dos autovetores de P\nsoma_autovetores_P <- colSums(eigen_P)\n\n# Exibindo a soma dos autovetores de P\nprint(soma_autovetores_P)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] -2.1633934 -0.3386760  0.1557935  0.4236154 -0.0361385\n```\n:::\n\n```{.r .cell-code}\n# Arredondando para 4 casas decimais para facilitar a comparação\nsoma_autovetores_P_arredondada <- round(sum(soma_autovetores_P), 4)\n\nsoma_autovetores_P_arredondada\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] -1.9588\n```\n:::\n:::\n\n\nb) A soma dos valores absolutos da diagonal da matriz C é 0,0722.\n\n::: {.cell}\n\n```{.r .cell-code}\n# Calculando C\nC <- solve(A %*% t(B))\n\n# Calculando a soma dos valores absolutos da diagonal de C\nsoma_diagonal_C <- sum(abs(diag(C)))\n\n# Exibindo a soma\nsoma_diagonal_C\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 0.07224898\n```\n:::\n:::\n\n\nc) A soma de uma matriz triangular inferior para a matriz $A$ é 233.\n\n::: {.cell}\n\n```{.r .cell-code}\n# Definindo a matriz A\nA <- matrix(c(28, 32, 8, 9, 49,\n              7, 21, 35, 28, 10,\n              47, 43, 15, 34, 2,\n              48, 42, 19, 32, 26,\n              45, 44, 39, 50, 26),\n            nrow = 5,\n            byrow = TRUE)\n\n# Calculando a soma dos elementos da matriz triangular inferior\nsoma_triang_inferior <- sum(A[row(A) > col(A)])\n\n# Exibindo a soma\nsoma_triang_inferior\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 384\n```\n:::\n:::\n\n\nd) O $log10$ do valor absoluto do determinante de $A$ é 6,335. O $log10$ do valor absoluto do determinante de B é 6,7168. O $log10$ do valor absoluto do determinante da matriz resultante do produto matricial entre $A$ e $B$ é 13,0518.\n\n::: {.cell}\n\n```{.r .cell-code}\n# Calculando o log10 do valor absoluto do determinante de A\nlog_det_A <- log10(abs(det(A)))\n\n# Exibindo o resultado\nprint(log_det_A)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 6.335031\n```\n:::\n\n```{.r .cell-code}\n# Calculando o log10 do valor absoluto do determinante de B\nlog_det_B <- log10(abs(det(B)))\n\n# Exibindo o resultado\nprint(log_det_B)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 6.716753\n```\n:::\n\n```{.r .cell-code}\n# Calculando o determinante da matriz resultante do produto matricial entre A e B\ndet_AB <- det(A %*% B)\n\n# Calculando o log10 do valor absoluto do determinante de AB\nlog_det_AB <- log10(abs(det_AB))\n\n# Exibindo o resultado\nprint(log_det_AB)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 13.05178\n```\n:::\n:::\n\n\ne) O maior elemento da diagonal do inverso da matriz resultante do produto matricial entre $A$ e o transposto de $B$ é 0,026.\n\n::: {.cell}\n\n```{.r .cell-code}\n# Calculando o produto matricial entre A e o transposto de B\nABt <- A %*% t(B)\n\n# Calculando o inverso da matriz resultante\ninv_ABt <- solve(ABt)\n\n# Obtendo a diagonal da matriz inversa\ndiagonal_inv_ABt <- diag(inv_ABt)\n\n# Encontrando o maior elemento da diagonal\nmaior_elemento_diagonal <- max(diagonal_inv_ABt)\n\n# Exibindo o resultado\nmaior_elemento_diagonal\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 0.01596027\n```\n:::\n:::\n\n\n## 2. Para esse exercício você deverá utilizar o banco de dados `chocolate.csv.gz`.\nO dicionário das variáveis encontra-se disponível abaixo.\n|Variável| Descrição|\n|--|--|\n|local_compania| Região do Fabricante|\n|ano| Ano da Revisão|\n|origem_cacau| País de Origem dos Grãos de Cacau|\n|cocoa_percent| Percentagem de Cacau (% chocolate)|\n|ingredientes| Ingredientes|\n|caracteristicas| Características mais memoráveis daquele chocolate|\n\n**Lista de ingredientes**: “#”: representa o número de ingredientes no chocolate; B: Grãos, S: Açúcar, S*: Adoçante diferente de açúcar de cana branco ou beterraba, C: Manteiga de Cacau, V: Baunilha, L: Lecitina, Sa: Sal\n\nAssinale todas as alternativas incorreta(s).\n\n\n::: {.cell}\n\n```{.r .cell-code}\nrequire(data.table)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nCarregando pacotes exigidos: data.table\n```\n:::\n\n```{.r .cell-code}\nrequire(dplyr)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nCarregando pacotes exigidos: dplyr\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\n\nAttaching package: 'dplyr'\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\nThe following objects are masked from 'package:data.table':\n\n    between, first, last\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\nThe following objects are masked from 'package:stats':\n\n    filter, lag\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\nThe following objects are masked from 'package:base':\n\n    intersect, setdiff, setequal, union\n```\n:::\n\n```{.r .cell-code}\nrequire(tidyr)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nCarregando pacotes exigidos: tidyr\n```\n:::\n\n```{.r .cell-code}\nchocolate = fread(\"./avaliação_01-datasets/chocolate.csv.gz\")\n\nglimpse(chocolate)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nRows: 2,443\nColumns: 7\n$ local_compania    <chr> \"U.S.A.\", \"U.S.A.\", \"U.S.A.\", \"U.S.A.\", \"U.S.A.\", \"U…\n$ ano               <int> 2019, 2019, 2019, 2021, 2021, 2021, 2021, 2012, 2012…\n$ origem_cacau      <chr> \"Tanzania\", \"Dominican Republic\", \"Madagascar\", \"Fij…\n$ ingredientes      <chr> \"3- B,S,C\", \"3- B,S,C\", \"3- B,S,C\", \"3- B,S,C\", \"3- …\n$ caracteristicas   <chr> \"rich cocoa, fatty, bready\", \"cocoa, vegetal, savory…\n$ percentagem_cacau <chr> \"76%\", \"76%\", \"76%\", \"68%\", \"72%\", \"80%\", \"68%\", \"70…\n$ ID                <int> 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 1…\n```\n:::\n:::\n\n\n\na) Existem 2443 países que produzem chocolate.\n\n::: {.cell}\n\n```{.r .cell-code}\nnum_paises <- chocolate %>%\n  select(origem_cacau) %>%\n  distinct() %>%\n  nrow()\n\n# Exibir o número de países\nprint(num_paises)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 62\n```\n:::\n:::\n\n\nb) Existem 104 chocolates com 4 ingredientes que são descritos por 2 características.\n\n::: {.cell}\n\n```{.r .cell-code}\nchocolate$qtdade_caracteristicas <- lengths(strsplit(chocolate$caracteristicas, \",\"))\n  \nq2 <- chocolate %>%\n  filter(substr(ingredientes, 1, 1) == \"4\",\n         qtdade_caracteristicas == \"2\")\n\n# Contar o número de chocolates resultantes\nnum_chocolates <- nrow(q2)\n\n# Exibir o número de chocolates\nprint(num_chocolates)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 104\n```\n:::\n:::\n\n\n\nc) A frequência absoluta para chocolates que contenham 5 ingredientes é 750.\n\n::: {.cell}\n\n```{.r .cell-code}\n# Filtrar chocolates que contenham 5 ingredientes\nchocolates_5_ingredientes <- chocolate %>%\n  filter(substr(ingredientes, 1, 1) == \"5\")\n\n# Calcular a frequência absoluta\nfrequencia_absoluta <- nrow(chocolates_5_ingredientes)\n\n# Exibir a frequência absoluta\nprint(frequencia_absoluta)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 191\n```\n:::\n:::\n\n\nd) As 8 caracterististicas mais marcantes dos chocolates são sweet, nutty, cocoa, roasty, creamy, earthy, sandy e fatty e juntas correspondem a 1663 descrições dos chocolates.\n\n::: {.cell}\n\n```{.r .cell-code}\n# Criar um novo dataframe com as características separadas em linhas\ncaracteristicas_chocolate <- chocolate %>%\n  separate_rows(caracteristicas, sep = \",\") %>%\n  group_by(caracteristicas) %>%\n  summarise(frequencia = n()) %>%\n  arrange(desc(frequencia))\n\ncaracteristicas_chocolate\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 1,202 × 2\n   caracteristicas frequencia\n   <chr>                <int>\n 1 \" cocoa\"               206\n 2 \" sweet\"               175\n 3 \" nutty\"               173\n 4 \"creamy\"               161\n 5 \" roasty\"              160\n 6 \" earthy\"              141\n 7 \"sandy\"                139\n 8 \" sour\"                122\n 9 \" floral\"               91\n10 \"intense\"               88\n# ℹ 1,192 more rows\n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n# Selecionar apenas as características desejadas\npalavras_chave <- c(\"sweet\", \"nutty\", \"cocoa\", \"roasty\", \"creamy\", \"earthy\", \"sandy\", \"fatty\")\n\n# Criar uma expressão regular para corresponder a variações nas palavras-chave\npadrao_regex <- paste0(\"\\\\b\", paste(palavras_chave, collapse = \"|\"), \"\\\\b\", ignore.case = TRUE)\n\n# Filtrar as características desejadas e somar as frequências\nq2b <- caracteristicas_chocolate %>%\n  filter(grepl(padrao_regex, caracteristicas))  %>%\n  group_by(caracteristicas)\n\n# Exibir a soma das frequências\nprint(q2b)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 120 × 2\n# Groups:   caracteristicas [120]\n   caracteristicas frequencia\n   <chr>                <int>\n 1 \" cocoa\"               206\n 2 \" sweet\"               175\n 3 \" nutty\"               173\n 4 \"creamy\"               161\n 5 \" roasty\"              160\n 6 \" earthy\"              141\n 7 \"sandy\"                139\n 8 \"sweet\"                 85\n 9 \"nutty\"                 83\n10 \"roasty\"                52\n# ℹ 110 more rows\n```\n:::\n\n```{.r .cell-code}\nsum(q2b$frequencia)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 1748\n```\n:::\n:::\n\n\ne) Existem 81 chocolates que incluem o ingrediente *Adoçante* em sua composição.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Criar um novo dataframe com as características separadas em linhas\ningredientes_chocolate <- chocolate %>%\n  separate_rows(ingredientes, sep = \",\") %>%\n  separate_rows(ingredientes, sep = \"-\") %>%\n  group_by(ingredientes) %>%\n  summarise(frequencia = n()) %>%\n  arrange(desc(frequencia))\n\nsum(ingredientes_chocolate$frequencia[ingredientes_chocolate$ingredientes == \"S*\"])\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 76\n```\n:::\n:::\n\n\n## 3. Para esse exercício você deverá utilizar os banco de dados `Art.csv.gz` e `Art_Moma.csv.gz`. Desconsidere artistas sem nacionalidade e/ou sem nome.\nO dicionário das variáveis encontra-se disponível abaixo.\n\n|variável| descrição|\n|--|--|\n|artist_name| O nome de cada artista|\n|edition_number| O número da edição do livro.|\n|year| O ano de publicação de uma determinada edição do livro|\n|artist_nationality| A nacionalidade de um artista.|\n|artist_nationality_other| A nacionalidade do artista|\n|artist_gender| O gênero do artista|\n|vartist_race| A raça do artista|\n|artist_ethnicity| A etnia do artista|\n|book| Qual livro, “Janson” ou “Gardner”|\n|space_ratio_per_page_total| A área em centímetros quadrados do texto e da figura de um determinado artista|\n|artist_unique_id| O número de identificação exclusivo atribuído aos artistas|\n|moma_count_to_year| O número total de exposições já realizadas pelo Museu de Arte Moderna (MoMA)|\n|whitney_count_to_year| O número de exposições realizadas pelo The Whitney|\n|artist_race_nwi| O indicador de raça não branca para a raça do artista|\n\n\n::: {.cell}\n\n```{.r .cell-code}\nrequire(data.table)\nrequire(dplyr)\nrequire(tidyr)\n\nart_moma = fread(\"./avaliação_01-datasets/Art_Moma.csv.gz\")\nart = fread(\"./avaliação_01-datasets/Art.csv.gz\")\n\n\nglimpse(art_moma)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nRows: 3,162\nColumns: 7\n$ edition_number             <dbl> 9, 10, 11, 12, 13, 14, 15, 16, 14, 15, 16, …\n$ year                       <int> 1991, 1996, 2001, 2005, 2009, 2013, 2016, 2…\n$ book                       <chr> \"Gardner\", \"Gardner\", \"Gardner\", \"Gardner\",…\n$ space_ratio_per_page_total <dbl> 0.3533658, 0.3739470, 0.3032593, 0.3770489,…\n$ moma_count_to_year         <int> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0…\n$ whitney_count_to_year      <int> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0…\n$ artist_unique_id           <int> 2, 2, 2, 2, 2, 2, 2, 2, 4, 4, 4, 6, 6, 6, 6…\n```\n:::\n\n```{.r .cell-code}\nglimpse(art)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nRows: 413\nColumns: 8\n$ artist_name              <chr> \"Aaron Douglas\", \"Adélaïde Labille-Guiard\", \"…\n$ artist_nationality       <chr> \"American\", \"French\", \"French\", \"German-Ameri…\n$ artist_nationality_other <chr> \"American\", \"French\", \"French\", \"Other\", \"Ame…\n$ artist_gender            <chr> \"Male\", \"Female\", \"Male\", \"Male\", \"Male\", \"Ma…\n$ artist_race              <chr> \"Black or African American\", \"White\", \"White\"…\n$ artist_ethnicity         <chr> \"Not Hispanic or Latino origin\", \"Not Hispani…\n$ artist_unique_id         <int> 2, 4, 6, 7, 8, 12, 14, 15, 16, 17, 18, 19, 20…\n$ artist_race_nwi          <chr> \"Non-White\", \"White\", \"White\", \"White\", \"Whit…\n```\n:::\n:::\n\n\nAssinale todas as alternativas **correta(s)**.\na) Os 3 artista(s) com mais exposições no The Whitney classificados em ordem decrescente de exposições são: Edward Hopper, Georgia O’Keeffe e Stuart Davis.\n\n::: {.cell}\n\n```{.r .cell-code}\nq3a <- inner_join(art, art_moma,\n                  by = \"artist_unique_id\") %>%\n  group_by(artist_name) %>%\n  summarise(sum_whitney_count_to_year = sum(whitney_count_to_year)) %>%\n  arrange(desc(sum_whitney_count_to_year))\n\nq3a\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 413 × 2\n   artist_name       sum_whitney_count_to_year\n   <chr>                                 <int>\n 1 Edward Hopper                           529\n 2 Georgia O'Keeffe                        352\n 3 Stuart Davis                            339\n 4 Willem de Kooning                       333\n 5 George Grosz                            332\n 6 Ellsworth Kelly                         276\n 7 Jacob Lawrence                          248\n 8 Jasper Johns                            235\n 9 Jackson Pollock                         203\n10 Roy Lichtenstein                        200\n# ℹ 403 more rows\n```\n:::\n:::\n\n\nb) Do total de artistas, 152 são Swiss, Mexican ou Japanese.\n\n::: {.cell}\n\n```{.r .cell-code}\nq3b <- inner_join(art, art_moma,\n                  by = \"artist_unique_id\") %>%\n  group_by(artist_nationality) %>%\n  summarise(frequencia = n()) \n\nq3b\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 52 × 2\n   artist_nationality frequencia\n   <chr>                   <int>\n 1 American                  908\n 2 Argentine                   1\n 3 Armenian-American          10\n 4 Australian                  7\n 5 Austrian                   36\n 6 Austrian-American           5\n 7 Belgian                    30\n 8 Brazilian                   1\n 9 British                   317\n10 Canadian                   14\n# ℹ 42 more rows\n```\n:::\n\n```{.r .cell-code}\npalavras_chave <- c(\"Swiss\", \"Mexican\", \"Japanese\")\n\n\n# Filtrar as características desejadas e somar as frequências\nq3b <- q3b %>%\n  filter(artist_nationality %in% palavras_chave)\n\n# Exibir a soma das frequências\nprint(q3b)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 3 × 2\n  artist_nationality frequencia\n  <chr>                   <int>\n1 Japanese                   56\n2 Mexican                    52\n3 Swiss                      44\n```\n:::\n\n```{.r .cell-code}\nsum(q3b$frequencia)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 152\n```\n:::\n:::\n\n\n\nc) Apenas 6 artista(s) com a nacionalidade Swiss tiveram entre 0 e 1 exposições no The Whitney.\n\n::: {.cell}\n\n```{.r .cell-code}\nq3c <- inner_join(art, art_moma,\n                  by = \"artist_unique_id\") %>%\n  group_by(artist_name, artist_nationality) %>%\n  summarise(sum_whitney_count_to_year = sum(whitney_count_to_year))\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n`summarise()` has grouped output by 'artist_name'. You can override using the\n`.groups` argument.\n```\n:::\n\n```{.r .cell-code}\nq3c\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 413 × 3\n# Groups:   artist_name [413]\n   artist_name                artist_nationality sum_whitney_count_to_year\n   <chr>                      <chr>                                  <int>\n 1 A. R. Penck                German                                     0\n 2 Aaron Douglas              American                                   0\n 3 Aaron Siskind              American                                   0\n 4 Adolph Gottlieb            American                                  46\n 5 Adolphe William Bouguereau French                                     0\n 6 Adélaïde Labille-Guiard    French                                     0\n 7 Albert Bierstadt           German-American                            0\n 8 Albert Pinkham Ryder       American                                   0\n 9 Albert Renger-Patzsch      German                                     0\n10 Albert Sands Southworth    American                                   0\n# ℹ 403 more rows\n```\n:::\n\n```{.r .cell-code}\npalavras_chave <- c(\"Swiss\")\n\n\n# Filtrar as características desejadas e somar as frequências\nq3c <- q3c %>%\n  filter(artist_nationality %in% palavras_chave &\n           sum_whitney_count_to_year <= 1)\n\n# Exibir a soma das frequências\nprint(q3c)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 5 × 3\n# Groups:   artist_name [5]\n  artist_name           artist_nationality sum_whitney_count_to_year\n  <chr>                 <chr>                                  <int>\n1 Angelica Kauffmann    Swiss                                      0\n2 Arnold Böcklin        Swiss                                      0\n3 Friedrich von Martens Swiss                                      0\n4 Henry Fuseli          Swiss                                      0\n5 Jean Tinguely         Swiss                                      0\n```\n:::\n\n```{.r .cell-code}\nnrow(q3c)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 5\n```\n:::\n:::\n\n\nd) A diferença entre a média de páginas para artistas Brancos e Não Brancos no ano de 2007 é -0,24.\n\n::: {.cell}\n\n```{.r .cell-code}\nq3d <- inner_join(art, art_moma,\n                  by = \"artist_unique_id\") \n\n# Filtrar por artist_race == \"white\" e calcular a média\nmedia_white <- q3d %>%\n  filter(artist_race_nwi == \"White\") %>%\n  summarise(media_space_ratio = mean(space_ratio_per_page_total))\n\n# Filtrar por artist_race diferente de \"white\" e calcular a média\nmedia_nao_white <- q3d %>%\n  filter(artist_race_nwi != \"White\") %>%\n  summarise(media_space_ratio = mean(space_ratio_per_page_total))\n\n# Calcular a diferença\ndiferenca <- media_white$media_space_ratio - media_nao_white$media_space_ratio\n\n# Exibir o resultado\nprint(diferenca)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 0.1395619\n```\n:::\n:::\n\n\n\ne) Dos artista(s) que expuseram no The Whitney, apenas 164 aparecem nos livros ‘Gardner’\ne ‘Janson’.\n\n::: {.cell}\n\n```{.r .cell-code}\nq3e <- inner_join(art, art_moma,\n                  by = \"artist_unique_id\") \n\nunique(q3e$book)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] \"Gardner\" \"Janson\" \n```\n:::\n\n```{.r .cell-code}\nq3e <- q3e %>%\n  filter(whitney_count_to_year > 0) %>%\n  group_by(artist_name) %>%\n  summarise(frequencia = n())\n\nnrow(q3e)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 101\n```\n:::\n:::\n\n\n\n## 4. Para esse exercício você deverá utilizar os banco de dados refugiados_pais.csv.gz e refugiados.csv.gz. Considere apenas observações completas.\nAssinale todas as alternativas **correta(s)**.\n\n::: {.cell}\n\n```{.r .cell-code}\nrequire(data.table)\nrequire(dplyr)\nrequire(tidyr)\n\nrefugiados_pais= fread(\"./avaliação_01-datasets/refugiados_pais.csv.gz\")\nrefugiados = fread(\"./avaliação_01-datasets/refugiados.csv.gz\")\n\n\nglimpse(refugiados_pais)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nRows: 230\nColumns: 4\n$ id        <chr> \"AFG\", \"ALB\", \"DZA\", \"AND\", \"AGO\", \"AIA\", \"ATG\", \"ARG\", \"ARM…\n$ nome      <chr> \"Afghanistan\", \"Albania\", \"Algeria\", \"Andorra\", \"Angola\", \"A…\n$ regiao    <chr> \"Asia\", \"Europe\", \"Africa\", \"Europe\", \"Africa\", \"Americas\", …\n$ subregiao <chr> \"Southern Asia\", \"Southern Europe\", \"Northern Africa\", \"Sout…\n```\n:::\n\n```{.r .cell-code}\nglimpse(refugiados)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nRows: 120,338\nColumns: 4\n$ ano        <int> 1951, 1951, 1951, 1951, 1951, 1951, 1951, 1951, 1951, 1951,…\n$ id_origem  <chr> \"UNK\", \"UNK\", \"UNK\", \"UNK\", \"UNK\", \"UNK\", \"UNK\", \"UNK\", \"UN…\n$ id_destino <chr> \"AUS\", \"AUT\", \"BEL\", \"CAN\", \"DNK\", \"FRA\", \"GBR\", \"DEU\", \"GR…\n$ refugiados <int> 180000, 282000, 55000, 168511, 2000, 290000, 208000, 265000…\n```\n:::\n\n```{.r .cell-code}\n# Realizar o left join\ntb4 <- refugiados %>%\n  left_join(refugiados_pais, by = c(\"id_origem\" = \"id\")) %>%\n  left_join(refugiados_pais, by = c(\"id_destino\" = \"id\"), suffix = c(\"_origem\", \"_destino\"))\n\n# Exibir a planilha\nprint(tb4)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n         ano id_origem id_destino refugiados                        nome_origem\n     1: 1951       UNK        AUS     180000                               <NA>\n     2: 1951       UNK        AUT     282000                               <NA>\n     3: 1951       UNK        BEL      55000                               <NA>\n     4: 1951       UNK        CAN     168511                               <NA>\n     5: 1951       UNK        DNK       2000                               <NA>\n    ---                                                                        \n120334: 2022       VEN        ABW          0 Venezuela (Bolivarian Republic of)\n120335: 2022       ABW        ABW          0                              Aruba\n120336: 2022       VEN        CUW          0 Venezuela (Bolivarian Republic of)\n120337: 2022       CUW        CUW          0                            Curacao\n120338: 2022       VEN        SXM          0 Venezuela (Bolivarian Republic of)\n        regiao_origem                subregiao_origem              nome_destino\n     1:          <NA>                            <NA>                 Australia\n     2:          <NA>                            <NA>                   Austria\n     3:          <NA>                            <NA>                   Belgium\n     4:          <NA>                            <NA>                    Canada\n     5:          <NA>                            <NA>                   Denmark\n    ---                                                                        \n120334:      Americas Latin America and the Caribbean                     Aruba\n120335:      Americas Latin America and the Caribbean                     Aruba\n120336:      Americas Latin America and the Caribbean                   Curacao\n120337:      Americas Latin America and the Caribbean                   Curacao\n120338:      Americas Latin America and the Caribbean Sint Maarten (Dutch part)\n        regiao_destino               subregiao_destino\n     1:        Oceania       Australia and New Zealand\n     2:         Europe                  Western Europe\n     3:         Europe                  Western Europe\n     4:       Americas                Northern America\n     5:         Europe                 Northern Europe\n    ---                                               \n120334:       Americas Latin America and the Caribbean\n120335:       Americas Latin America and the Caribbean\n120336:       Americas Latin America and the Caribbean\n120337:       Americas Latin America and the Caribbean\n120338:       Americas Latin America and the Caribbean\n```\n:::\n:::\n\n\n(a) A matriz de migração [origem, destino] intercontinental do ano 2006 é dada por:\n|Região  |Africa |Americas|Asia   |Europe|Oceania|\n|--------|-------|--------|-------|------|-------|\n|Africa  |2507581|262745  |98175  |250070|37124  |\n|Americas|0      |150149  |0      |14850 |174    |\n|Asia    |76780  |308706  |4411284|664075|42704  |\n|Europe  |94     |306672  |7816   |454237|3423   |\n|Oceania |0      |1679    |0      |92    |59     |\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Filtrar para o ano de 2006\ntb4_2006 <- tb4 %>% filter(ano == 2006)\n\n# Criar a matriz de migração [origem, destino]\nmatriz_migracao_2006 <- tb4_2006 %>%\n  group_by(regiao_origem, regiao_destino) %>%\n  summarise(total_migrantes = sum(refugiados)) %>%\n  pivot_wider(names_from = regiao_destino, values_from = total_migrantes, values_fill = 0)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n`summarise()` has grouped output by 'regiao_origem'. You can override using the\n`.groups` argument.\n```\n:::\n\n```{.r .cell-code}\n# Exibir a matriz de migração no formato desejado\nprint(matriz_migracao_2006)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 6 × 7\n# Groups:   regiao_origem [6]\n  regiao_origem  Africa Americas    Asia Europe Oceania  `NA`\n  <chr>           <int>    <int>   <int>  <int>   <int> <int>\n1 Africa        2507581   262745   98175 250070   37124     0\n2 Americas            0   150149       0  14850     174     0\n3 Asia            76780   308706 4411284 664075   42704     0\n4 Europe             94   306672    7816 454237    3423     0\n5 Oceania             0     1679       0     92      59     0\n6 <NA>            22980     5748   20381 228763     518     0\n```\n:::\n:::\n\n\n(b) A partir de 1972 houveram 172075 refugiados partindo do país: Afghanistan para o país: Canada, e 219920 refugiados partindo do país: Pakistan para o país: Canada.\n\n::: {.cell}\n\n```{.r .cell-code}\n# Especificar o nome_origem, nome_destino e ano desejados\nano_desejado <- 1972\n\nq4b <- tb4 %>%\n  group_by(nome_origem, nome_destino, ano) %>%\n  summarise(refugiados = sum(refugiados), .groups = \"drop\") \n\nresultado <- q4b %>%\n  filter(ano >= ano_desejado) %>%\n  group_by(nome_origem, nome_destino) %>%\n  summarise(total_refugiados = sum(refugiados))\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n`summarise()` has grouped output by 'nome_origem'. You can override using the\n`.groups` argument.\n```\n:::\n\n```{.r .cell-code}\nrefugiados_af_can <- resultado %>%\n  filter(nome_origem == \"Afghanistan\", nome_destino == \"Canada\")\nprint(refugiados_af_can)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 1 × 3\n# Groups:   nome_origem [1]\n  nome_origem nome_destino total_refugiados\n  <chr>       <chr>                   <int>\n1 Afghanistan Canada                 172022\n```\n:::\n\n```{.r .cell-code}\nrefugiados_paq_can <- resultado %>%\n  filter(nome_origem == \"Pakistan\", nome_destino == \"Canada\")\nprint(refugiados_paq_can)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 1 × 3\n# Groups:   nome_origem [1]\n  nome_origem nome_destino total_refugiados\n  <chr>       <chr>                   <int>\n1 Pakistan    Canada                 219988\n```\n:::\n:::\n\n\n(c) Os 5 países que mais enviaram refugiados no ano de 1965 pertencem às subregiões Sub-Saharan Africa e Southern Europe.\n\n::: {.cell}\n\n```{.r .cell-code}\nano_c <- 1965\n\nq4c <- tb4 %>%\n  group_by(nome_origem, subregiao_origem, ano) %>%\n  summarise(refugiados = sum(refugiados), .groups = \"drop\") \n\nq4c <- q4c %>%\n  filter(ano == ano_c) %>%\n  group_by(nome_origem, subregiao_origem) %>%\n  summarise(total_refugiados = sum(refugiados)) %>%\n  arrange(desc(total_refugiados))\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n`summarise()` has grouped output by 'nome_origem'. You can override using the\n`.groups` argument.\n```\n:::\n\n```{.r .cell-code}\nq4c\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 15 × 3\n# Groups:   nome_origem [15]\n   nome_origem            subregiao_origem   total_refugiados\n   <chr>                  <chr>                         <int>\n 1 <NA>                   <NA>                        1581335\n 2 China                  Eastern Asia                1330000\n 3 Angola                 Sub-Saharan Africa           220000\n 4 Rwanda                 Sub-Saharan Africa           155900\n 5 Sudan                  Northern Africa               81560\n 6 Guinea-Bissau          Sub-Saharan Africa            50000\n 7 Dem. Rep. of the Congo Sub-Saharan Africa            47000\n 8 Greece                 Southern Europe               17690\n 9 Mozambique             Sub-Saharan Africa            17000\n10 Viet Nam               South-eastern Asia            15000\n11 Ghana                  Sub-Saharan Africa             5000\n12 Albania                Southern Europe                4860\n13 Hungary                Eastern Europe                 3270\n14 Burundi                Sub-Saharan Africa             3000\n15 Congo                  Sub-Saharan Africa                0\n```\n:::\n:::\n\n\n(d) Os 6 países que mais receberam refugiados a partir de 1982 receberam juntos 19523 refugiados.\n\n::: {.cell}\n\n```{.r .cell-code}\nano_d <- 1982\n\nq4d <- tb4 %>%\n  group_by(nome_destino, ano) %>%\n  summarise(refugiados = sum(refugiados), .groups = \"drop\") %>%\n  na.omit()\n\nq4d <- q4d %>%\n  filter(ano >= ano_d) %>%\n  group_by(nome_destino) %>%\n  summarise(total_refugiados = sum(refugiados)) %>%\n  arrange(desc(total_refugiados))\n\nq4d\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 191 × 2\n   nome_destino             total_refugiados\n   <chr>                               <int>\n 1 Pakistan                         75814675\n 2 Iran (Islamic Rep. of)           72881894\n 3 Germany                          32908138\n 4 Türkiye                          29883329\n 5 Sudan                            23165858\n 6 United States of America         17905925\n 7 Dem. Rep. of the Congo           16212832\n 8 Uganda                           16166236\n 9 Ethiopia                         15899126\n10 United Rep. of Tanzania          14793351\n# ℹ 181 more rows\n```\n:::\n:::\n\n\n(e) Existem 27 países que receberam pelo menos 5382652 refugiados.\n\n::: {.cell}\n\n```{.r .cell-code}\nn_refugiados <- 5382652\n\nq4e<- tb4 %>%\n  group_by(nome_destino) %>%\n  summarise(refugiados = sum(refugiados), .groups = \"drop\") %>%\n  na.omit()\n\nq4e <- q4e %>%\n  filter(refugiados >= n_refugiados) %>%\n  arrange(desc(refugiados))\n\ncat('Existem', nrow(q4e), 'países que receberam pelo menos', n_refugiados, 'refugiados.\\n')\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nExistem 30 países que receberam pelo menos 5382652 refugiados.\n```\n:::\n:::",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}