{
  "hash": "1782d881919a42baac0934e2d3acab3c",
  "result": {
    "markdown": "---\nalways_allow_html: true\ntitle: \"Aula 10\"\n---\n\n\n## Organização de dados\n\n\n::: {.cell}\n\n```{.r .cell-code}\nrequire(tidyr)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nCarregando pacotes exigidos: tidyr\n```\n:::\n\n```{.r .cell-code}\nrequire(magrittr)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nCarregando pacotes exigidos: magrittr\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\n\nAttaching package: 'magrittr'\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\nThe following object is masked from 'package:tidyr':\n\n    extract\n```\n:::\n\n```{.r .cell-code}\nrequire(dplyr)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nCarregando pacotes exigidos: dplyr\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\n\nAttaching package: 'dplyr'\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\nThe following objects are masked from 'package:stats':\n\n    filter, lag\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\nThe following objects are masked from 'package:base':\n\n    intersect, setdiff, setequal, union\n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\ntable1\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 6 × 4\n  country      year  cases population\n  <chr>       <dbl>  <dbl>      <dbl>\n1 Afghanistan  1999    745   19987071\n2 Afghanistan  2000   2666   20595360\n3 Brazil       1999  37737  172006362\n4 Brazil       2000  80488  174504898\n5 China        1999 212258 1272915272\n6 China        2000 213766 1280428583\n```\n:::\n:::\n\n\n### pivot_wider\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntable1 %>% \n  select(-population) %>% \n  pivot_wider(names_from = year, \n              values_from = cases)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 3 × 3\n  country     `1999` `2000`\n  <chr>        <dbl>  <dbl>\n1 Afghanistan    745   2666\n2 Brazil       37737  80488\n3 China       212258 213766\n```\n:::\n\n```{.r .cell-code}\ntable1 %>% \n  select(-population) %>% \n  pivot_wider(names_from = year, \n              values_from = cases, \n              values_fill = 0,\n              values_fn = length)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 3 × 3\n  country     `1999` `2000`\n  <chr>        <int>  <int>\n1 Afghanistan      1      1\n2 Brazil           1      1\n3 China            1      1\n```\n:::\n:::\n\n\n## pivot_longer\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntable1 %>% \n  pivot_longer(cols = c(cases, population), \n               names_to = \"variavel\", \n               values_to = \"tamanho_pop\"\n               \n               )\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 12 × 4\n   country      year variavel   tamanho_pop\n   <chr>       <dbl> <chr>            <dbl>\n 1 Afghanistan  1999 cases              745\n 2 Afghanistan  1999 population    19987071\n 3 Afghanistan  2000 cases             2666\n 4 Afghanistan  2000 population    20595360\n 5 Brazil       1999 cases            37737\n 6 Brazil       1999 population   172006362\n 7 Brazil       2000 cases            80488\n 8 Brazil       2000 population   174504898\n 9 China        1999 cases           212258\n10 China        1999 population  1272915272\n11 China        2000 cases           213766\n12 China        2000 population  1280428583\n```\n:::\n:::\n\n\n### separate\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntab3_sep = table3 %>% \n  separate(rate, \n          into = c(\"casos\", \"populacao\"), \n           sep = \"/\")\n```\n:::\n\n\n### unite\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntab3_sep %>% \n  unite(pop_casos, populacao, casos, sep = \" | \")\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 6 × 3\n  country      year pop_casos          \n  <chr>       <dbl> <chr>              \n1 Afghanistan  1999 19987071 | 745     \n2 Afghanistan  2000 20595360 | 2666    \n3 Brazil       1999 172006362 | 37737  \n4 Brazil       2000 174504898 | 80488  \n5 China        1999 1272915272 | 212258\n6 China        2000 1280428583 | 213766\n```\n:::\n:::\n\n\n## TB\n\n\n::: {.cell}\n\n```{.r .cell-code}\nrequire(data.table)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nCarregando pacotes exigidos: data.table\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\n\nAttaching package: 'data.table'\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\nThe following objects are masked from 'package:dplyr':\n\n    between, first, last\n```\n:::\n\n```{.r .cell-code}\nTB <- fread(\"~/Downloads/TB.csv.gz\")\n```\n\n::: {.cell-output .cell-output-error}\n```\nError in fread(\"~/Downloads/TB.csv.gz\"): File '~/Downloads/TB.csv.gz' does not exist or is non-readable. getwd()=='C:/Users/Convidado/ce302/CE302_Elementos_Programacao_Estatistica/scripts_aulas'\n```\n:::\n\n```{.r .cell-code}\nTB1 = TB %>% \n  select(-c(iso2, iso3)) %>% \n  pivot_longer(-c(country, year), \n               names_to = \"chave\", \n               values_to = \"casos\", \n               values_drop_na = TRUE              )\n```\n\n::: {.cell-output .cell-output-error}\n```\nError in select(., -c(iso2, iso3)): objeto 'TB' não encontrado\n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nTB2 = TB1 %>% \n  mutate(chave = stringr::str_replace(chave, \"newrel\", \"new_rel\"))\n```\n\n::: {.cell-output .cell-output-error}\n```\nError in mutate(., chave = stringr::str_replace(chave, \"newrel\", \"new_rel\")): objeto 'TB1' não encontrado\n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nTB3 = TB2 %>% \n  separate(chave, c(\"novo\", \"tipo\", \"sexoidade\"),\n           sep = \"_\") %>% \n  select(-novo)\n```\n\n::: {.cell-output .cell-output-error}\n```\nError in separate(., chave, c(\"novo\", \"tipo\", \"sexoidade\"), sep = \"_\"): objeto 'TB2' não encontrado\n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nTB4 = TB3 %>% \n  separate(sexoidade,\n           c(\"sexo\", \"idade\"), \n           sep = 1)\n```\n\n::: {.cell-output .cell-output-error}\n```\nError in separate(., sexoidade, c(\"sexo\", \"idade\"), sep = 1): objeto 'TB3' não encontrado\n```\n:::\n:::\n\n\n# Exercícios\n\nUtilizando os dados de TB4, crie uma tabela em formato wide, com a quantidade de casos por país por ano. Cada ano deve ser chamado \"Ano\\_.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nTB4 %>% \n  pivot_wider(names_from = year, \n              names_prefix = \"Ano_\",\n              values_from = casos, \n              id_cols = country, \n              values_fn = sum)\n```\n\n::: {.cell-output .cell-output-error}\n```\nError in pivot_wider(., names_from = year, names_prefix = \"Ano_\", values_from = casos, : objeto 'TB4' não encontrado\n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nTB5 = TB4 %>% \n  pivot_wider(names_from = year, \n              names_prefix = \"Ano_\", \n              values_from = casos, \n              values_fn = sum, \n              id_cols = c(country, sexo, idade))\n```\n\n::: {.cell-output .cell-output-error}\n```\nError in pivot_wider(., names_from = year, names_prefix = \"Ano_\", values_from = casos, : objeto 'TB4' não encontrado\n```\n:::\n\n```{.r .cell-code}\nTB4 %>% \n  select(-tipo) %>% \n  pivot_wider(names_from = year, \n              names_prefix = \"Ano_\", \n              values_from = casos, \n              values_fn = sum)\n```\n\n::: {.cell-output .cell-output-error}\n```\nError in select(., -tipo): objeto 'TB4' não encontrado\n```\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nTB5 %>% \n  pivot_longer(cols = starts_with(\"Ano\"), \n               names_to = \"ano\", \n               values_to = \"casos\") %>% \n  mutate(ano = stringr::str_replace(ano, \"Ano_\", \"\"))\n```\n\n::: {.cell-output .cell-output-error}\n```\nError in pivot_longer(., cols = starts_with(\"Ano\"), names_to = \"ano\", : objeto 'TB5' não encontrado\n```\n:::\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}